Hai un confronto troppo “rigido” su `confirmed_operation` (`=== false`). Nel board “containers” probabilmente arriva proprio un boolean `false`, mentre nella *timeline* può arrivare come stringa `"false"` o come `0`/`1`, quindi il confronto fallisce e finisce nel ramo che mostra `operation_id`.

Ecco cosa far modificare all’AI, **esattamente**.

---

## 1) `client/src/components/drag-drop/task-card.tsx`

### A) Normalizza `confirmed_operation` una volta sola

Subito dentro al componente, **dopo** la dichiarazione di `useState`/`useEffect`, aggiungi:

```ts
// Normalizza confirmed_operation da boolean/number/string a boolean sicuro
const rawConfirmed = (task as any).confirmed_operation;
const isConfirmedOperation =
  typeof rawConfirmed === "boolean"
    ? rawConfirmed
    : typeof rawConfirmed === "number"
      ? rawConfirmed !== 0
      : typeof rawConfirmed === "string"
        ? ["true", "1", "yes"].includes(rawConfirmed.toLowerCase().trim())
        : Boolean(rawConfirmed);
```

> Scopo: avere una variabile unica e affidabile (`isConfirmedOperation`) che vale `true` quando l’operazione è confermata, **indipendentemente** dal tipo del dato in ingresso.

### B) Mostra il “?” sulla **card** in timeline usando la variabile normalizzata

**Sostituisci** questa condizione:

```tsx
{task.confirmed_operation === false && (
  <div className="absolute top-0.5 right-0.5 z-50">
    <HelpCircle className="w-3 h-3 text-gray-900" strokeWidth={2.5} />
  </div>
)}
```

**con**:

```tsx
{!isConfirmedOperation && (
  <div className="absolute top-0.5 right-0.5 z-50">
    <HelpCircle className="w-3 h-3 text-gray-900" strokeWidth={2.5} />
  </div>
)}
```

### C) “Tipologia intervento” nel **popup**

Nel blocco “Tipologia intervento” del dialog, **sostituisci**:

```tsx
<p className="text-sm">
  {(task as any).confirmed_operation === false
    ? "non migrato"
    : (task as any).operation_id}
</p>
```

**con**:

```tsx
<p className="text-sm">
  {!isConfirmedOperation ? "non migrato" : (task as any).operation_id ?? "-"}
</p>
```

---

## 2) (Facoltativo ma consigliato) Tipizzare a monte

Se possibile, fai anche in modo che dal loader/API arrivi **sempre** un booleano reale:

* Converti `confirmed_operation` lato backend/loader:
  `"true" | "1" | 1 → true` e `"false" | "0" | 0 | null | undefined → false`.

Così il front non dovrà difendersi da tipi incoerenti.

---

### Perché questo risolve il tuo caso

* Nella *timeline* il controllo `=== false` non scattava (valore non *esattamente* `false`), quindi veniva mostrato `operation_id`.
* Con `isConfirmedOperation` normalizzato, **sia** il “?” sulla card **sia** il testo “non migrato” nel popup seguiranno la stessa logica e saranno coerenti tra *containers* e *timeline*.

Se vuoi, posso applicare io le patch al file e restituirti il diff completo.
