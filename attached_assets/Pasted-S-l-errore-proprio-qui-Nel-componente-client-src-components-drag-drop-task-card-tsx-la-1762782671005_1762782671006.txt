Sì—l’errore è proprio qui.

Nel componente:
`client/src/components/drag-drop/task-card.tsx`

la logica delle frecce dentro il **Dialog** usa sempre `id` per identificare la task, ma quando apri il dialog da “Timeline/Convocazioni” molte task hanno la chiave **`task_id`** (e non `id`).
Risultato: l’indice della task corrente diventa `-1`, `canGoPrev/canGoNext` vanno a `false` e le frecce restano disabilitate / non funzionano.

### Dove succede

* Calcolo dell’indice e dell’`effectiveCurrentId`:

```ts
// attuale (bug): usa solo t.id
const effId = currentTaskId && navigableTasks.some(t => String(t.id) === String(currentTaskId))
  ? currentTaskId
  : task.id;

const currIdx = navigableTasks.findIndex(t => String(t.id) === String(effId));
```

* Navigazione:

```ts
// attuale (bug): salva solo nextTask.id / prevTask.id
setCurrentTaskId(nextTask.id);
setCurrentTaskId(prevTask.id);
```

* Stato iniziale:

```ts
// attuale (bug): parte da task.id
const [currentTaskId, setCurrentTaskId] = useState(task.id);
```

### Correzione minima (consigliata)

Introduce un helper che normalizza l’id:

```ts
// helper in cima al componente
const getTaskKey = (t: any) => String(t?.id ?? t?.task_id);

// stato iniziale
const [currentTaskId, setCurrentTaskId] = useState(getTaskKey(task));

// ricalcolo effId/currIdx
const effId =
  currentTaskId && navigableTasks.some(t => getTaskKey(t) === String(currentTaskId))
    ? currentTaskId
    : getTaskKey(task);

const currentTaskInNavigable = navigableTasks.findIndex(
  t => getTaskKey(t) === String(effId)
);

// nei handler frecce
setCurrentTaskId(getTaskKey(nextTask));
setCurrentTaskId(getTaskKey(prevTask));
```

Volendo, puoi anche sostituire **tutte** le occorrenze di `t.id` usate per confronti/assegnazioni con `getTaskKey(t)` (lascia pure la UI che mostra `task_id ?? id`, quella parte è ok).

### Sintomo spiegato in una riga

Le frecce non “vedono” la task corrente perché confrontano `id` con una lista che ha `task_id`: l’indice è `-1`, quindi la navigazione è bloccata.
